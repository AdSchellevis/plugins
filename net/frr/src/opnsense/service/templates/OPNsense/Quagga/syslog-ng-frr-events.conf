{% if not helpers.empty('OPNsense.quagga.general.enabled')
  and not helpers.empty('OPNsense.quagga.ospf.enabled')
  and not helpers.empty('OPNsense.quagga.ospf.carp_demote') %}
destination d_frr_event {
    program("/usr/local/opnsense/scripts/quagga/event_loop.sh");
};

filter f_frr_ospf {
    program("ospfd") and (
        (
                level("info") or level("notice")
        ) or (
                level("debug") and message(".*EXT .*ospf_ext_link_ism_change.*")
        )
    );
};

log {
    source(s_all);
    filter(f_frr_ospf);
    destination(d_frr_event);
};
{% endif %}
